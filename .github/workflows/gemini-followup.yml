name: Gemini Code Assist Follow-up

on:
  # Triggers on each inline review comment (the "Reply..." threads on code lines)
  pull_request_review_comment:
    types: [created]

jobs:
  reply-to-review-comment:
    runs-on: ubuntu-latest
    if: github.event.comment.user.login == 'gemini-code-assist[bot]'
    permissions:
      pull-requests: write
    steps:
      - name: Reply to inline review comment
        uses: actions/github-script@v7
        with:
          script: |
            await github.rest.pulls.createReplyForReviewComment({
              owner: context.repo.owner,
              repo: context.repo.repo,
              pull_number: context.payload.pull_request.number,
              comment_id: context.payload.comment.id,
              body: '@gemini-code-assist, what are the steps, file, and line numbers to make this fix?'
            });
